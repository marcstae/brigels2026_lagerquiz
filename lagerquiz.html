<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Lagerquiz Brigels 2026</title>
<link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;500;600;700&family=Nunito:wght@400;600;700;800&display=swap" rel="stylesheet">
<style>
  :root {
    --bg: #1a1a2e;
    --bg-light: #16213e;
    --accent: #e94560;
    --accent-glow: #ff6b81;
    --gold: #f5c542;
    --gold-glow: #ffd700;
    --cell-bg: #0f3460;
    --cell-border: #2a5298;
    --cell-filled: #1a6b4a;
    --cell-text: #fff;
    --highlight-bg: #e94560;
    --highlight-text: #fff;
    --solved-bg: #27ae60;
    --muted: #8899aa;
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  html, body {
    width: 100vw;
    height: 100vh;
    overflow: hidden;
    background: var(--bg);
    font-family: 'Nunito', sans-serif;
    color: #fff;
  }

  body {
    display: flex;
    flex-direction: column;
    background: 
      radial-gradient(ellipse at 20% 50%, rgba(233,69,96,0.08) 0%, transparent 60%),
      radial-gradient(ellipse at 80% 30%, rgba(15,52,96,0.4) 0%, transparent 60%),
      radial-gradient(ellipse at 50% 80%, rgba(245,197,66,0.05) 0%, transparent 50%),
      var(--bg);
  }

  /* ‚îÄ‚îÄ HEADER ‚îÄ‚îÄ */
  .header {
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 1.2vh 2vw 0.6vh;
    position: relative;
  }

  .header h1 {
    font-family: 'Fredoka', sans-serif;
    font-weight: 700;
    font-size: 3.2vh;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    background: linear-gradient(135deg, var(--gold), var(--accent-glow));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    text-shadow: none;
  }

  .header .progress-text {
    position: absolute;
    right: 2vw;
    font-size: 2vh;
    color: var(--muted);
    font-weight: 600;
  }

  /* ‚îÄ‚îÄ MAIN LAYOUT ‚îÄ‚îÄ */
  .main {
    flex: 1;
    display: flex;
    gap: 2vw;
    padding: 1vh 2vw 1.5vh;
    min-height: 0;
  }

  /* ‚îÄ‚îÄ LEFT: QUESTION PANEL ‚îÄ‚îÄ */
  .question-panel {
    width: 36%;
    display: flex;
    flex-direction: column;
    gap: 1.5vh;
  }

  .question-card {
    background: linear-gradient(145deg, var(--bg-light), #1a2744);
    border: 2px solid var(--cell-border);
    border-radius: 1.5vh;
    padding: 2.5vh 2vw;
    flex: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    position: relative;
    overflow: hidden;
  }

  .question-card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--accent), var(--gold));
  }

  .question-number {
    font-family: 'Fredoka', sans-serif;
    font-size: 7vh;
    font-weight: 700;
    color: var(--accent);
    opacity: 0.15;
    position: absolute;
    right: 1.5vw;
    top: 0.5vh;
    line-height: 1;
  }

  .question-label {
    font-size: 1.8vh;
    text-transform: uppercase;
    letter-spacing: 0.15em;
    color: var(--gold);
    font-weight: 700;
    margin-bottom: 1vh;
  }

  .question-text {
    font-size: 2.8vh;
    font-weight: 600;
    line-height: 1.5;
    color: #e8e8e8;
  }

  /* ‚îÄ‚îÄ INPUT AREA ‚îÄ‚îÄ */
  .input-area {
    display: flex;
    gap: 0.8vw;
    align-items: center;
  }

  .answer-input {
    flex: 1;
    background: var(--bg-light);
    border: 2px solid var(--cell-border);
    border-radius: 1vh;
    padding: 1.4vh 1.2vw;
    color: #fff;
    font-family: 'Fredoka', sans-serif;
    font-size: 2.5vh;
    font-weight: 600;
    letter-spacing: 0.1em;
    text-transform: uppercase;
    outline: none;
    transition: border-color 0.3s;
  }

  .answer-input:focus {
    border-color: var(--gold);
  }

  .answer-input::placeholder {
    color: #445566;
    text-transform: none;
    letter-spacing: 0;
    font-weight: 400;
  }

  .btn {
    background: linear-gradient(135deg, var(--accent), #c0392b);
    border: none;
    color: #fff;
    font-family: 'Fredoka', sans-serif;
    font-weight: 600;
    font-size: 2vh;
    padding: 1.4vh 1.8vw;
    border-radius: 1vh;
    cursor: pointer;
    transition: transform 0.15s, box-shadow 0.15s;
    white-space: nowrap;
  }

  .btn:hover { transform: scale(1.05); box-shadow: 0 0 20px rgba(233,69,96,0.4); }
  .btn:active { transform: scale(0.97); }

  .btn-gold {
    background: linear-gradient(135deg, var(--gold), #e6a800);
    color: #1a1a2e;
  }

  .btn-gold:hover { box-shadow: 0 0 20px rgba(245,197,66,0.4); }

  .btn-skip {
    background: transparent;
    border: 2px solid var(--muted);
    color: var(--muted);
    font-size: 1.7vh;
    padding: 1.2vh 1.4vw;
  }

  .btn-skip:hover { border-color: #fff; color: #fff; box-shadow: none; }

  /* ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ */
  .nav-row {
    display: flex;
    gap: 0.6vw;
    align-items: center;
    justify-content: center;
  }

  .nav-dot {
    width: 2.2vh;
    height: 2.2vh;
    border-radius: 50%;
    background: var(--cell-border);
    border: none;
    cursor: pointer;
    transition: all 0.2s;
    position: relative;
  }

  .nav-dot.active {
    background: var(--accent);
    box-shadow: 0 0 10px var(--accent-glow);
    transform: scale(1.3);
  }

  .nav-dot.solved {
    background: var(--solved-bg);
  }

  .nav-dot:hover { transform: scale(1.3); }

  /* ‚îÄ‚îÄ RIGHT: CROSSWORD GRID ‚îÄ‚îÄ */
  .crossword-panel {
    flex: 1;
    display: flex;
    align-items: center;
    justify-content: center;
    min-width: 0;
  }

  .crossword-grid {
    display: grid;
    gap: 2px;
  }

  .cell {
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Fredoka', sans-serif;
    font-weight: 700;
    text-transform: uppercase;
    border-radius: 3px;
    transition: all 0.4s ease;
    position: relative;
  }

  .cell.empty {
    background: transparent;
  }

  .cell.letter {
    background: var(--cell-bg);
    border: 1px solid var(--cell-border);
    color: transparent;
  }

  .cell.letter.revealed {
    color: var(--cell-text);
    background: var(--cell-filled);
    border-color: #2ecc71;
  }

  .cell.letter.highlight {
    border: 2px solid var(--gold);
  }

  .cell.letter.highlight.revealed {
    background: linear-gradient(135deg, #c8a415, #e6b800);
    border-color: var(--gold-glow);
    box-shadow: 0 0 12px rgba(245,197,66,0.6);
    color: #1a1a2e;
  }

  .cell.letter.active-row {
    border-color: var(--gold);
    box-shadow: 0 0 8px rgba(245,197,66,0.3);
  }

  .cell .row-num {
    position: absolute;
    top: 1px;
    left: 3px;
    font-size: 0.55em;
    color: var(--muted);
    font-weight: 600;
  }

  /* ‚îÄ‚îÄ SOLUTION BANNER ‚îÄ‚îÄ */
  .solution-banner {
    display: none;
    position: fixed;
    inset: 0;
    background: rgba(0,0,0,0.85);
    z-index: 100;
    align-items: center;
    justify-content: center;
    flex-direction: column;
    gap: 3vh;
    animation: fadeIn 0.5s;
  }

  .solution-banner.visible { display: flex; }

  .solution-word {
    font-family: 'Fredoka', sans-serif;
    font-size: 6vh;
    font-weight: 700;
    letter-spacing: 0.3em;
    text-transform: uppercase;
    color: var(--gold);
    text-shadow: 0 0 20px rgba(245,197,66,0.6), 0 0 40px rgba(245,197,66,0.3);
  }

  .solution-subtitle {
    font-size: 3vh;
    color: var(--muted);
    font-weight: 600;
  }

  .confetti {
    position: fixed;
    width: 10px;
    height: 10px;
    border-radius: 2px;
    animation: confettiFall 3s ease-in forwards;
    z-index: 101;
    pointer-events: none;
  }

  @keyframes confettiFall {
    0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; }
    100% { transform: translateY(110vh) rotate(720deg); opacity: 0; }
  }

  @keyframes fadeIn {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes popIn {
    0% { transform: scale(0.5); opacity: 0; }
    70% { transform: scale(1.1); }
    100% { transform: scale(1); opacity: 1; }
  }

  .cell.letter.just-revealed {
    animation: popIn 0.4s ease-out;
  }

  /* ‚îÄ‚îÄ FEEDBACK ‚îÄ‚îÄ */
  .feedback {
    text-align: center;
    font-size: 2vh;
    font-weight: 700;
    min-height: 3vh;
    transition: all 0.3s;
  }

  .feedback.correct { color: #2ecc71; }
  .feedback.wrong { color: var(--accent); }

  /* ‚îÄ‚îÄ RESPONSIVE for exact 16:9 ‚îÄ‚îÄ */
  @media (min-aspect-ratio: 16/9) {
    .main { padding: 1vh 3vw 1.5vh; }
  }
</style>
</head>
<body>

<div class="header">
  <h1>‚õ∑Ô∏è Lagerquiz Brigels 2026 ‚õ∑Ô∏è</h1>
  <div class="progress-text" id="progressText">0 / 20</div>
</div>

<div class="main">
  <div class="question-panel">
    <div class="question-card">
      <div class="question-number" id="qNumBig">1</div>
      <div class="question-label" id="qLabel">Frage 1 von 20</div>
      <div class="question-text" id="qText"></div>
    </div>

    <div class="input-area">
      <input type="text" class="answer-input" id="answerInput" placeholder="Antwort eingeben..." autocomplete="off" spellcheck="false">
      <button class="btn btn-gold" id="submitBtn" onclick="checkAnswer()">‚úì</button>
      <button class="btn btn-skip" id="skipBtn" onclick="showAnswer()">Aufl√∂sen</button>
    </div>

    <div class="feedback" id="feedback"></div>

    <div class="nav-row" id="navRow"></div>
  </div>

  <div class="crossword-panel">
    <div class="crossword-grid" id="grid"></div>
  </div>
</div>

<div class="solution-banner" id="solutionBanner">
  <div class="solution-subtitle">üéâ Die L√∂sung lautet üéâ</div>
  <div class="solution-word" id="solutionWord"></div>
  <button class="btn btn-gold" onclick="closeBanner()" style="margin-top:2vh;font-size:2.5vh;padding:1.5vh 3vw;">Schliessen</button>
</div>

<script>
// ‚îÄ‚îÄ DATA ‚îÄ‚îÄ
const questions = [
  "bestellt Cr√®meschnitte, isst sie aber nicht",
  "Lagerfilmproduzent",
  "Zeitverz√∂gerer f√ºrs Abendessen",
  "kommt mit seeehr verschmutzten Kleidern vom Skifahren",
  "wurde im Lager wieder gesund",
  "gr√∂sste Frau im Lager",
  "Snowboardlehrer",
  "unschlagbar im Memory",
  "wird h√§ufig gespielt im Lager",
  "hat einen neuen Weckton kreiert",
  "bisherige Dauer der Locher-√Ñgide",
  "Stv unseres 'Di√§tkochs'",
  "Konfi-Sponsorin",
  "der mit der weissen Weste",
  "hat von Snowboard wieder auf Ski gewechselt (Nachname)",
  "verpasst im Nebel die Piste - mangels Kenntnis der Pfostensignalisierung",
  "Station auf 2'392 M√ºM",
  "Skirenn-Fotograf",
  "Bircherm√ºesli-Koch",
  "Vater, der das 1. x im Lager ist"
];

// Each word: [answer, gridColStart (0-based in 13-col grid), highlightIndex]
const words = [
  { answer: "ROMEA",      col: 3, hi: 2 },
  { answer: "PATRIK",     col: 1, hi: 4 },
  { answer: "STOCKI",     col: 4, hi: 1 },
  { answer: "CHRISTIAN",  col: 0, hi: 5 },
  { answer: "ANNA",       col: 2, hi: 3 },
  { answer: "GABI",       col: 5, hi: 0 },
  { answer: "DEAN",       col: 4, hi: 1 },
  { answer: "SOLINA",     col: 5, hi: 0 },
  { answer: "JASSEN",     col: 2, hi: 3 },
  { answer: "VRENI",      col: 3, hi: 2 },
  { answer: "FUENFZEHN",  col: 2, hi: 3 },
  { answer: "JANIS",      col: 2, hi: 3 },
  { answer: "MARIANNE",   col: 5, hi: 0 },
  { answer: "SEBASTIAN",  col: 3, hi: 2 },
  { answer: "KAUFMANN",   col: 3, hi: 2 },
  { answer: "ADRIAN",     col: 3, hi: 2 },
  { answer: "FIL",        col: 3, hi: 2 },
  { answer: "DIETER",     col: 3, hi: 2 },
  { answer: "JURI",       col: 4, hi: 1 },
  { answer: "ROLAND",     col: 1, hi: 4 }
];

const SOLUTION = "MITTAGESSENIMBURLEUN";
const ROWS = 20;
const COLS = 13; // max grid columns needed

let currentQ = 0;
let solved = new Array(ROWS).fill(false);

// ‚îÄ‚îÄ BUILD GRID ‚îÄ‚îÄ
function buildGrid() {
  const grid = document.getElementById('grid');
  // Calculate cell size based on viewport
  const availH = window.innerHeight * 0.78;
  const availW = window.innerWidth * 0.56;
  const cellH = Math.floor(availH / ROWS) - 2;
  const cellW = Math.floor(availW / COLS) - 2;
  const cellSize = Math.min(cellH, cellW, 42);

  grid.style.gridTemplateColumns = `repeat(${COLS}, ${cellSize}px)`;
  grid.style.gridTemplateRows = `repeat(${ROWS}, ${cellSize}px)`;
  grid.style.fontSize = `${cellSize * 0.52}px`;
  grid.innerHTML = '';

  for (let r = 0; r < ROWS; r++) {
    const w = words[r];
    for (let c = 0; c < COLS; c++) {
      const cell = document.createElement('div');
      cell.classList.add('cell');

      const letterIdx = c - w.col;
      if (letterIdx >= 0 && letterIdx < w.answer.length) {
        cell.classList.add('letter');
        cell.dataset.row = r;
        cell.dataset.col = c;
        cell.dataset.letter = w.answer[letterIdx];
        cell.textContent = w.answer[letterIdx];

        if (letterIdx === w.hi) {
          cell.classList.add('highlight');
        }
        // Show row number on first letter
        if (letterIdx === 0) {
          const num = document.createElement('span');
          num.className = 'row-num';
          num.textContent = r + 1;
          cell.appendChild(num);
        }
      } else {
        cell.classList.add('empty');
      }

      grid.appendChild(cell);
    }
  }

  highlightActiveRow();
}

// ‚îÄ‚îÄ NAV DOTS ‚îÄ‚îÄ
function buildNav() {
  const nav = document.getElementById('navRow');
  nav.innerHTML = '';
  for (let i = 0; i < ROWS; i++) {
    const dot = document.createElement('button');
    dot.className = 'nav-dot';
    dot.title = `Frage ${i + 1}`;
    if (i === currentQ) dot.classList.add('active');
    if (solved[i]) dot.classList.add('solved');
    dot.onclick = () => goTo(i);
    nav.appendChild(dot);
  }
}

function updateNav() {
  const dots = document.querySelectorAll('.nav-dot');
  dots.forEach((d, i) => {
    d.classList.toggle('active', i === currentQ);
    d.classList.toggle('solved', solved[i]);
  });
}

// ‚îÄ‚îÄ DISPLAY QUESTION ‚îÄ‚îÄ
function showQuestion() {
  document.getElementById('qNumBig').textContent = currentQ + 1;
  document.getElementById('qLabel').textContent = `Frage ${currentQ + 1} von 20`;
  document.getElementById('qText').textContent = questions[currentQ];
  document.getElementById('answerInput').value = '';
  document.getElementById('feedback').textContent = '';
  document.getElementById('feedback').className = 'feedback';

  const input = document.getElementById('answerInput');
  const submitBtn = document.getElementById('submitBtn');
  const skipBtn = document.getElementById('skipBtn');

  if (solved[currentQ]) {
    input.value = words[currentQ].answer;
    input.disabled = true;
    submitBtn.style.display = 'none';
    skipBtn.textContent = 'Weiter ‚Üí';
    skipBtn.onclick = () => nextUnsolved();
    skipBtn.className = 'btn btn-gold';
  } else {
    input.disabled = false;
    input.focus();
    submitBtn.style.display = '';
    skipBtn.textContent = 'Aufl√∂sen';
    skipBtn.onclick = () => showAnswer();
    skipBtn.className = 'btn btn-skip';
  }

  highlightActiveRow();
  updateNav();
  updateProgress();
}

function highlightActiveRow() {
  document.querySelectorAll('.cell.letter.active-row').forEach(c => c.classList.remove('active-row'));
  if (!solved[currentQ]) {
    document.querySelectorAll(`.cell.letter[data-row="${currentQ}"]`).forEach(c => c.classList.add('active-row'));
  }
}

// ‚îÄ‚îÄ CHECK ANSWER ‚îÄ‚îÄ
function normalize(s) {
  return s.toUpperCase()
    .replace(/[√Ñ√Ä√Å√Ç]/g, 'A').replace(/[√ã√à√â√ä]/g, 'E')
    .replace(/[√è√å√ç√é]/g, 'I').replace(/[√ñ√í√ì√î]/g, 'O')
    .replace(/[√ú√ô√ö√õ]/g, 'U')
    .replace(/[^A-Z]/g, '');
}

function checkAnswer() {
  const input = document.getElementById('answerInput').value.trim();
  if (!input) return;

  const guess = normalize(input);
  const correct = normalize(words[currentQ].answer);

  if (guess === correct) {
    revealRow(currentQ);
    document.getElementById('feedback').textContent = '‚úì Richtig!';
    document.getElementById('feedback').className = 'feedback correct';
    setTimeout(() => nextUnsolved(), 1200);
  } else {
    document.getElementById('feedback').textContent = '‚úó Leider falsch...';
    document.getElementById('feedback').className = 'feedback wrong';
    document.getElementById('answerInput').select();
  }
}

function showAnswer() {
  revealRow(currentQ);
  document.getElementById('feedback').textContent = `‚Üí ${words[currentQ].answer}`;
  document.getElementById('feedback').className = 'feedback';
  setTimeout(() => nextUnsolved(), 1500);
}

function revealRow(r) {
  solved[r] = true;
  const cells = document.querySelectorAll(`.cell.letter[data-row="${r}"]`);
  cells.forEach((c, i) => {
    setTimeout(() => {
      c.classList.add('revealed', 'just-revealed');
      c.classList.remove('active-row');
      setTimeout(() => c.classList.remove('just-revealed'), 500);
    }, i * 80);
  });
  updateProgress();
  checkAllSolved();
}

// ‚îÄ‚îÄ NAVIGATION ‚îÄ‚îÄ
function goTo(idx) {
  currentQ = idx;
  showQuestion();
}

function nextUnsolved() {
  // Find next unsolved after current
  for (let i = 1; i <= ROWS; i++) {
    const idx = (currentQ + i) % ROWS;
    if (!solved[idx]) {
      currentQ = idx;
      showQuestion();
      return;
    }
  }
  // All solved
  currentQ = ROWS - 1;
  showQuestion();
  showSolution();
}

function updateProgress() {
  const count = solved.filter(Boolean).length;
  document.getElementById('progressText').textContent = `${count} / 20`;
}

// ‚îÄ‚îÄ SOLUTION ‚îÄ‚îÄ
function checkAllSolved() {
  if (solved.every(Boolean)) {
    setTimeout(showSolution, 1500);
  }
}

function showSolution() {
  const banner = document.getElementById('solutionBanner');
  const word = document.getElementById('solutionWord');
  banner.classList.add('visible');

  // Animate solution letters
  word.innerHTML = '';
  SOLUTION.split('').forEach((ch, i) => {
    const span = document.createElement('span');
    span.textContent = ch;
    span.style.display = 'inline-block';
    span.style.opacity = '0';
    span.style.transform = 'translateY(20px)';
    span.style.transition = `all 0.4s ease ${i * 0.08}s`;
    word.appendChild(span);
    setTimeout(() => {
      span.style.opacity = '1';
      span.style.transform = 'translateY(0)';
    }, 50);
  });

  // Confetti
  for (let i = 0; i < 80; i++) {
    const c = document.createElement('div');
    c.className = 'confetti';
    c.style.left = Math.random() * 100 + 'vw';
    c.style.background = ['#e94560','#f5c542','#2ecc71','#3498db','#9b59b6','#fff'][Math.floor(Math.random()*6)];
    c.style.animationDelay = Math.random() * 2 + 's';
    c.style.width = (Math.random() * 8 + 6) + 'px';
    c.style.height = (Math.random() * 8 + 6) + 'px';
    document.body.appendChild(c);
    setTimeout(() => c.remove(), 5000);
  }
}

function closeBanner() {
  document.getElementById('solutionBanner').classList.remove('visible');
}

// ‚îÄ‚îÄ KEYBOARD ‚îÄ‚îÄ
document.addEventListener('keydown', (e) => {
  if (e.key === 'Enter') {
    if (solved[currentQ]) {
      nextUnsolved();
    } else {
      checkAnswer();
    }
  }
  if (e.key === 'ArrowRight') {
    goTo(Math.min(currentQ + 1, ROWS - 1));
  }
  if (e.key === 'ArrowLeft') {
    goTo(Math.max(currentQ - 1, 0));
  }
});

// ‚îÄ‚îÄ INIT ‚îÄ‚îÄ
window.addEventListener('resize', buildGrid);
buildGrid();
buildNav();
showQuestion();
</script>
</body>
</html>
